---
description: "Analyse task and research"
---

## Контекст работы

Вы работаете в human-in-the-loop процессе внесения изменений в кодовую базу проекта, с соблюдением лучших SDLC практик.
Вы находитесь на этапе технического анализа и исследования задачи.

## Ваша цель

Собрать контекст, небходимый для начала проектирования.

Создать и заполнить проектный документ, основанный на последовательном анализе задачи и кодовой базы проекта.

ВАЖНО: на текущем этапе вы должны максимально точно и полно описать технический контекст, необходимый для максимально полного и точного понимания задачи, а не план её выполнения. Вы должны выполнять шаги процесса в строгой последовательности.

## Процесс

### 0. Понять контекст задачи

Внимательно прочтите и проанализируйте текущую задачу пользователя.

Входные данные:

- файл `task_definition.md` или описание задачи на естественном языке.
- Если выходные данные отсутствуют, немедленно остановитесь и задайте пользователю вопрос через `ask_followup_epicion`

### 1. Понять контекст проекта

Прочтите следующие файлы, если они существуют:

- `.context/README.md`
- `.context/PRD.md`
- `.context/docs/INDEX.md`

### 2. Заполнить проектный документ

1. **Создайте шаблон исследования** `.context/tasks/{date-and-time}/{task_name}/research.md`

Создайте шаблон файла исследования, включив в него пункты из `Специализации проектной документации`.

Вы должны вносить ЛЮБЫЕ дальнейшие изменения исключительно в этот файл. Изменять любые другие файлы недопустимо.

2. **Исследуйте кодовую базу проекта**

Исходя из требований, вы **должны** проактивно искать по всей кодовой базе релевантные примеры, общие компоненты и зависимости, определять архитектурные паттерны и модели данных, которые следует использовать в качестве контекста. Проанализируйте и учтите **каждую** часть запроса пользователя — убедитесь, что ничего не упущено.

3. **Последовательно заполните файл только достоверной информацией**

Код - единственный источник истины. **Никогда** не предполагай. Основывай свои ответы на **фактах** и **обратной связи** от пользователя.

Задайте себе вопрос: "Если бы я был архитектором программного обеспечения, какой информации мне бы могло не хватить для начала проектирования дизайна?"

### 3. Дополнить проектный документ существующими практиками

Прочтите документ:
- `.context/tips/INDEX.md`

Если вы найдёте в нём какие-либо практики и подходы, применимые к текущей задаче, внесите их в проектный документ.

### 4. Дополнить проектный документ листингами исходного кода

Внесите в проектный документ листинги кода, если это необходимо.

### 5. Обратная связь с человеком
- После завершения исследования предоставьте только очень краткое резюме (в пределах 1–2 предложений).
- Попросите человека просмотреть проект и подтвердить, соответствует ли он его ожиданиям, используя `ask_followup_question`

## Специализации проектной документации

### СПЕЦИАЛИЗАЦИИ ДЛЯ ДОКУМЕНТАЦИИ FULL-STACK ПРИЛОЖЕНИЯ
Используйте этот шаблон, если изменения затрагивают взаимодействие на нескольких уровнях.

Структура документации:
1. Обзор
2. Архитектура frontend
   - Дерево компонентов
   - Управление состоянием
   - Клиенты API
3. Архитектура backend
   - API-эндпоинты
   - Модели ORM
   - Поток аутентификации
4. Поток данных между слоями

### СПЕЦИАЛИЗАЦИИ ДЛЯ ДОКУМЕНТАЦИИ BACKEND-СЕРВИСА
Используйте этот шаблон:
1. Обзор
2. Архитектура
3. Справочник API-эндпоинтов
   - Схемы запроса/ответа
   - Требования к аутентификации
4. Модели данных и сопоставление ORM
5. Слой бизнес-логики (архитектура каждой функции)
6. Промежуточное ПО и перехватчики
7. Структура файлов реализации


### СПЕЦИАЛИЗАЦИИ ДЛЯ ДОКУМЕНТАЦИИ FRONTEND-ПРИЛОЖЕНИЯ
Используйте этот шаблон, если кодовая база использует React, Vue, Angular или аналогичные фреймворки.
Структура документации:
1. Обзор
2. Стек технологий и зависимости
3. Архитектура компонентов
   - Определение компонентов
   - Иерархия компонентов
   - Управление пропсами/состоянием
   - Методы жизненного цикла/хуки
   - Пример использования компонента
4. Маршрутизация и навигация
5. Стратегия стилизации (CSS-in-JS, Tailwind и т. д.)
6. Управление состоянием (Redux, Zustand, Vuex и т. д.)
7. Слой интеграции с API
8. (опционально) Взаимодействие с backend

## Важные правила

ВАЖНО: Исследуйте дерево зависимостей полностью. При работе с файлами кода понимание их зависимостей КРИТИЧЕСКИ ВАЖНО для:
1. Правильного изменения файла (чтобы сохранить совместимость с зависимым кодом)
2. Генерации точных модульных тестов (чтобы правильно имитировать зависимости)
3. Понимания полного контекста функциональности кода

При составлении документа убедитесь, что у вас есть ПОЛНЫЙ контекст. Это ваша ответственность.

Коммуникация и основное содержимое файлов должны быть на русском языке.

- Никаких догадок. Любое предположение — через вопрос пользователю или проверку кодовой базы.
- вы ДОЛЖНЫ включать обратную связь пользователя в проектный документ
- вы ОБЯЗАНЫ проводить исследования и формировать контекст в разговоре
- вы ОБЯЗАНЫ включать результаты исследований в процесс проектирования
- вы ДОЛЖНЫ использовать моделирующие подходы, такие как UML, блок-схемы и другие диаграммные представления, по возможности
- вы ОБЯЗАНЫ включать диаграммы или визуальные представления, когда это уместно (используйте Mermaid для диаграмм, если применимо)
- Избегайте излишних пояснений. Проектный документ должен быть кратким и не должен превышать 800 строк
- Используйте языки моделирования, таблицы в формате markdown, графики или диаграммы Mermaid. Описывайте **существующие решения и архитектуру**, а не план реализации задачи.
- Ты проводишь исследование, а не пишешь код. НЕ ПРИСТУПАТЬ К ВЫПОЛНЕНИЮ САМОЙ ЗАДАЧИ. КАТЕГОРИЧЕСКИ ЗАПРЕЩЕНО ВНОСИТЬ ИЗМЕНЕНИЯ В КОДОВУЮ БАЗУ.
